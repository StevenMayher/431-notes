[{"path":"index.html","id":"working-with-these-notes","chapter":"Working with These Notes","heading":"Working with These Notes","text":"document broken multiple chapters. Use table contents left side screen navigate chapters, use right side navigate within current chapter.can also search document, using automated index.code provided document can copied clipboard using Copy icon top right code block.document updated (unpredictably) throughout semester.","code":""},{"path":"index.html","id":"the-431-course-online","chapter":"Working with These Notes","heading":"The 431 Course online","text":"main web page 431 course Fall 2021 https://thomaselove.github.io/431/. Go information related course.","code":""},{"path":"index.html","id":"what-youll-find-here","chapter":"Working with These Notes","heading":"What You’ll Find Here","text":"Notes provide series examples using R work issues likely come PQHS/CRSP/MPHP 431. mostly find brief explanations key idea summary, accompanied (time) R code demonstration results applying code.Notes share features textbook, neither comprehensive completely original. main purpose give 431 students set common materials draw course. class, sometimes:reiterate points made document,amplify ,simplify presentation things done ,use new examples show techniques,refer issues mentioned document,don’t follow notes precisely. assume instead read materials try learn , just attend classes try learn . welcome feedback kinds document anything else.Everything see available HTML PDF. also access R Markdown files, contain code generates everything document, including R results. demonstrate use R Markdown (document generated additional help R package called bookdown) RStudio (“program” use interface R language) class.data R code related notes also available .","code":""},{"path":"index.html","id":"setting-up-r","chapter":"Working with These Notes","heading":"Setting Up R","text":"Notes make extensive use ofthe statistical software language R, andthe development environment R Studio,free, ’ll need install machine. Instructions found course syllabus.need even gentler introduction, ’re just new R RStudio need learn , encourage take look http://moderndive.com/, provides introduction statistical data sciences via R Chester Ismay Albert Y. Kim.1These notes written using R Markdown. R Markdown, like R R Studio, free open source.R Markdown described authoring framework data science, lets yousave execute R codegenerate high-quality reports can shared audienceThis description comes http://rmarkdown.rstudio.com/lesson-1.html can visit get overview quick tour ’s possible R Markdown.Another excellent resource learn R Markdown tools Communicate section (especially R Markdown chapter) Garrett Grolemund Hadley Wickham.2","code":""},{"path":"index.html","id":"initial-setup-of-r-packages","chapter":"Working with These Notes","heading":"Initial Setup of R Packages","text":"start, ’ll present series commands run (silently) beginning chapter Notes. particular commands set output look nice either HTML PDF file, also set R use several packages (libraries) functions expand capabilities. chunk code like occur near top R Markdown work.deliberately set list loaded packages relatively small, add others later Notes. need install package , need reload every time start new session.","code":"\nknitr::opts_chunk$set(comment = NA)\n\nlibrary(knitr)\nlibrary(magrittr)\nlibrary(janitor)\nlibrary(NHANES)\nlibrary(palmerpenguins)\nlibrary(patchwork)\nlibrary(rms)\nlibrary(mosaic)\nlibrary(Epi)\nlibrary(naniar)\nlibrary(broom) # note: tidymodels includes the broom package\nlibrary(tidyverse) # note: tidyverse includes the dplyr and ggplot2 packages\n\ntheme_set(theme_bw())"},{"path":"index.html","id":"the-love-boost.r-script","chapter":"Working with These Notes","heading":"The Love-boost.R script","text":"Starting October, ’ll make use scripts ’ve gathered . necessary, ’ll source code using following command…","code":"\nsource(\"data/Love-boost.R\")"},{"path":"index.html","id":"additional-r-packages-installed-for-this-book","chapter":"Working with These Notes","heading":"Additional R Packages installed for this book","text":"packages need installed user’s system, need loaded R order run code presented set notes later. additional packages include following.","code":"boot\ncar\nGGally\ngt\npsych\nmodelsummary\nvisdat"},{"path":"data-science.html","id":"data-science","chapter":"1 Data Science","heading":"1 Data Science","text":"definition data science can little slippery. One current view data science, exemplified Steven Geringer’s 2014 Venn diagram.\nFigure 1.1: Data Science Venn Diagram Steven Geringer\nfield encompasses ideas mathematics statistics computer science, heavy reliance subject-matter knowledge. case, includes clinical, health-related, medical biological knowledge.Andrew Gelman Deborah Nolan3 suggest, experience intuition necessary good statistical practice hard obtain, teaching data science provides excellent opportunity reinforce statistical thinking skills across full cycle data analysis project.principal form computer science (coding/programming) play role course provide form communication. ’ll need learn express ideas just orally writing, also code.Data Science team activity. Everyone working data science brings part necessary skillset, one person can cover three areas alone excellent projects.[individual truly expert three key areas (mathematics/statistics, computer science subject-matter knowledge) ] mythical beast magical powers ’s rumored exist never actually seen wild.http://www.kdnuggets.com/2016/10/battle-data-science-venn-diagrams.html","code":""},{"path":"data-science.html","id":"data-science-project-cycle","chapter":"1 Data Science","heading":"1.1 Data Science Project Cycle","text":"typical data science project can modeled follows, comes introduction amazing book R Data Science, Garrett Grolemund Hadley Wickham, key text course.4\nFigure 1.2: Source: R Data Science: Introduction\ndiagram sometimes referred Krebs Cycle Data Science. steps data science project, encourage read Introduction Grolemund Wickham.5","code":""},{"path":"data-science.html","id":"data-science-and-the-431-course","chapter":"1 Data Science","heading":"1.2 Data Science and the 431 Course","text":"’ll discuss elements 431 course, focusing start understanding data transformation, modeling (especially early stages) visualization. 431, learn get things done.get people working R R Studio R Markdown, even completely new coding. gentle introduction provided Ismay Kim6We learn use tidyverse (http://www.tidyverse.org/), array tools R (mostly developed Hadley Wickham colleagues R Studio) share underlying philosophy make data science faster, easier, reproducible fun. critical text understanding tidyverse Grolemund Wickham.7 Tidyverse tools facilitate:\nimporting data R, can source intense pain things, really quite easy 95% time right tool.\ntidying data, , storing format includes one row per observation one column per variable. harder, important, might think.\ntransforming data, perhaps identifying specific subgroups interest, creating new variables based existing ones, calculating summaries.\nvisualizing data generate actual knowledge identify questions data - area R really shines, ’ll start class.\nmodeling data, taking approach modeling complementary visualization, allows us answer questions visualization helps us identify.\nlast, definitely least, communicating results, models visualizations others, way reproducible effective.\nimporting data R, can source intense pain things, really quite easy 95% time right tool.tidying data, , storing format includes one row per observation one column per variable. harder, important, might think.transforming data, perhaps identifying specific subgroups interest, creating new variables based existing ones, calculating summaries.visualizing data generate actual knowledge identify questions data - area R really shines, ’ll start class.modeling data, taking approach modeling complementary visualization, allows us answer questions visualization helps us identify.last, definitely least, communicating results, models visualizations others, way reproducible effective.programming/coding inevitable requirement accomplish aims. leery coding, ’ll need get past , help course stellar teaching assistants. Getting started always challenging part, experience pain developing new skills evaporates early October.","code":""},{"path":"data-science.html","id":"what-the-course-is-and-isnt","chapter":"1 Data Science","heading":"1.3 What The Course Is and Isn’t","text":"431 course getting things done. developing course, adopt modern approach places data center work. goal teach truly reproducible research modern tools. want able collect use data effectively address questions interest.curriculum includes several topics might expect standard graduate introduction biostatistics.data gatheringdata wranglingexploratory data analysis visualizationmultivariate modelingcommunicationIt also nearly completely avoids formalism extremely applied - absolutely course theoretical mathematical statistics, Notes reflect approach.’s little mathematical underpinnings :\\[\nf(x) = \\frac{e^{-(x - \\mu)^{2}/(2\\sigma^{2})}}{\\sigma{\\sqrt{2 \\pi }}} \n\\]Instead, notes (course) focus get R things want , interpret results work. next Chapter provides first example.","code":""},{"path":"looking-at-the-palmer-penguins.html","id":"looking-at-the-palmer-penguins","chapter":"2 Looking at the Palmer Penguins","heading":"2 Looking at the Palmer Penguins","text":"data palmerpenguins package R include size measurements, clutch observations, blood isotope ratios adult foraging Adélie, Chinstrap, Gentoo penguins observed islands Palmer Archipelago near Palmer Station, Antarctica. data collected made available Dr. Kristen Gorman Palmer Station Long Term Ecological Research (LTER) Program.palmerpenguins package, visit https://allisonhorst.github.io/palmerpenguins/.","code":""},{"path":"looking-at-the-palmer-penguins.html","id":"package-loading-then-dealing-with-missing-data","chapter":"2 Looking at the Palmer Penguins","heading":"2.1 Package Loading, then Dealing with Missing Data","text":"start, let’s load necessary R packages manage data summarize small table, plot. ’ve actually done previously, ’ll repeat steps , ’s worth seeing R .case, ’ll load five packages.’s worth remembering everything # line just comment reader, ignored R. ’ll see later loading single package (called tidyverse) gives us dplyr ggplot2 packages, well several useful things.Next, let’s take penguins data palmerpenguins package, identify observations complete data (, missing values) four variables interest. ’ll store result new data frame (think data set) called new_penguins take look result using following code.","code":"\nlibrary(palmerpenguins)  # source for the data set\nlibrary(janitor)         # some utilities for cleanup and simple tables\nlibrary(magrittr)        # provides us with the pipe %>% for code management\nlibrary(dplyr)           # part of the tidyverse: data management tools\nlibrary(ggplot2)         # part of the tidyverse: tools for plotting data\nnew_penguins <- penguins %>%\n    filter(complete.cases(flipper_length_mm, body_mass_g, species, sex))\n\nnew_penguins# A tibble: 333 x 8\n   species island    bill_length_mm bill_depth_mm\n   <fct>   <fct>              <dbl>         <dbl>\n 1 Adelie  Torgersen           39.1          18.7\n 2 Adelie  Torgersen           39.5          17.4\n 3 Adelie  Torgersen           40.3          18  \n 4 Adelie  Torgersen           36.7          19.3\n 5 Adelie  Torgersen           39.3          20.6\n 6 Adelie  Torgersen           38.9          17.8\n 7 Adelie  Torgersen           39.2          19.6\n 8 Adelie  Torgersen           41.1          17.6\n 9 Adelie  Torgersen           38.6          21.2\n10 Adelie  Torgersen           34.6          21.1\n# ... with 323 more rows, and 4 more variables:\n#   flipper_length_mm <int>, body_mass_g <int>, sex <fct>,\n#   year <int>"},{"path":"looking-at-the-palmer-penguins.html","id":"counting-things-and-making-tables","chapter":"2 Looking at the Palmer Penguins","heading":"2.2 Counting Things and Making Tables","text":", many penguins new_penguins data? printed result, got answer, (many things R) many ways get result.new_penguins data break sex species?Note strange spelling tabyl . output reasonably clear, make table little prettier, ’re , can add row column totals ?","code":"\nnrow(new_penguins)[1] 333\nnew_penguins %>% \n    tabyl(sex, species) # tabyl comes from the janitor package    sex Adelie Chinstrap Gentoo\n female     73        34     58\n   male     73        34     61\nnew_penguins %>% \n    tabyl(sex, species) %>%\n    adorn_totals(where = c(\"row\", \"col\")) %>% # add row, column totals\n    kable  # one convenient way to make the table prettier"},{"path":"looking-at-the-palmer-penguins.html","id":"visualizing-the-data-in-a-graph-or-a-few","chapter":"2 Looking at the Palmer Penguins","heading":"2.3 Visualizing the Data in a Graph (or a few…)","text":"Now, let’s look two variables interest. Let’s create graph showing association body mass flipper length across complete set 333 penguins.may want include straight-line model (fit classical linear regression) plot. One way R involves addition single line code, like :Whenever build graph , default choices may sufficient. ’d like see prettier version going show someone else. , might use different color species, might neaten theme (get rid default grey background) add title, like .","code":"\nggplot(new_penguins, aes(x = body_mass_g, y = flipper_length_mm)) +\n    geom_point() \nggplot(new_penguins, aes(x = body_mass_g, y = flipper_length_mm)) +\n    geom_point() +\n    geom_smooth(method = \"lm\", formula = y ~ x,\n                col = \"red\", se = FALSE)\nggplot(new_penguins, aes(x = body_mass_g, y = flipper_length_mm, col = species)) +\n    geom_point() + \n    theme_bw() + \n    labs(title = \"Flipper Length and Body Mass for 333 of the Palmer Penguins\")"},{"path":"looking-at-the-palmer-penguins.html","id":"six-ways-to-improve-this-graph","chapter":"2 Looking at the Palmer Penguins","heading":"2.4 Six Ways To “Improve” This Graph","text":"Now, let’s build new graph. , want :plot relationship body mass flipper length light Sex Speciesincrease size points add little transparency can see points overlap,add smooth curves summarize relationships two quantities (body mass flipper length) within combination species sex,split graph two “facets” (one sex),improve axis labels,improve titles adding subtitle, also adding code count penguins (rather hard-coding total number.)","code":"\nggplot(new_penguins, aes(x = body_mass_g, y = flipper_length_mm, \n                         col = species)) +\n    geom_point(size = 2, alpha = 0.5) + \n    geom_smooth(method = \"loess\", formula = y ~ x, \n                se = FALSE, size = 1.5) +\n    facet_grid(~ sex) +\n    theme_bw() + \n    labs(title = \"Flipper Length and Body Mass, by Sex & Species\",\n         subtitle = paste0(nrow(new_penguins), \" of the Palmer Penguins\"),\n         x = \"Body Mass (g)\", \n         y = \"Flipper Length (mm)\")"},{"path":"looking-at-the-palmer-penguins.html","id":"a-little-reflection","chapter":"2 Looking at the Palmer Penguins","heading":"2.5 A Little Reflection","text":"can learn plots construction? particular,plots suggest center distribution quantity (body mass flipper length) overall, within combination Sex Species?final plot suggest spread distribution quantities combination Sex Species?plots suggest association body mass flipper length across complete set penguins?shape nature body mass - flipper length relationship change based Sex Species?think helpful plot straight-line relationship (rather smooth curve) within combination Sex Species final plot? ? (Also, code accomplish ?)R code plot revised accomplish six “wants” specified ?","code":""},{"path":"dataviz.html","id":"dataviz","chapter":"3 NHANES: Initial Exploring","heading":"3 NHANES: Initial Exploring","text":"Next, ’ll explore data US National Health Nutrition Examination Survey, NHANES.’ll display R code go, ’ll return key coding ideas involved later Notes.","code":""},{"path":"dataviz.html","id":"the-nhanes-data-a-first-sample","chapter":"3 NHANES: Initial Exploring","heading":"3.1 The NHANES data: A First Sample","text":"NHANES package provides sample 10,000 NHANES responses 2009-10 2011-12 administrations, data frame also called NHANES. can obtain dimensions data frame (think rectangle data) dim() function.see 10000 rows 76 columns NHANES data frame.moment, let’s gather random sample 1,000 responses 10000 rows listed NHANES data frame, identify several variables interest subjects8. motivation example came Figure Benjamin S. Baumer, Daniel T. Kaplan, Nicholas J. Horton.9We 1000 rows (observations) 5 columns (variables) describe responses listed rows.","code":"\ndim(NHANES)[1] 10000    76\n# library(NHANES) # already loaded NHANES package/library of functions, data\n\nset.seed(431001) \n# use set.seed to ensure that we all get the same random sample \n# of 1,000 NHANES subjects in our nh_data collection\n\nnh_dat1 <- \n    slice_sample(NHANES, n = 1000, replace = FALSE) %>%\n    select(ID, SurveyYr, Gender, Age, Height)\n\nnh_dat1# A tibble: 1,000 x 5\n      ID SurveyYr Gender   Age Height\n   <int> <fct>    <fct>  <int>  <dbl>\n 1 69638 2011_12  female     5   106.\n 2 70782 2011_12  male      64   176.\n 3 52408 2009_10  female    54   162.\n 4 59031 2009_10  female    15   155.\n 5 64530 2011_12  male      53   185.\n 6 71040 2011_12  male      63   169.\n 7 55186 2009_10  female    30   168.\n 8 60211 2009_10  male       5   103.\n 9 55730 2009_10  male      66   161.\n10 68229 2011_12  female    36   170.\n# ... with 990 more rows"},{"path":"dataviz.html","id":"age-and-height","chapter":"3 NHANES: Initial Exploring","heading":"3.2 Age and Height","text":"Suppose want visualize relationship Height Age 1,000 NHANES observations. best choice likely scatterplot.note several interesting results .warning, R tells us “Removed 37 rows containing missing values (geom_point).” 963 subjects plotted , remaining 37 people missing (NA) values either Height, Age .Unsurprisingly, measured Heights subjects grow Age 0 Age 20 , see typical Height increases rapidly across Ages. middle distribution later Ages pretty consistent Height somewhere 150 175. units aren’t specified, expect must centimeters. Ages clearly reported Years.Age reported 80, appears large cluster Ages 80. may due requirement Ages 80 reported 80 help mask identity individuals.10As case, ’re going build visualizations using tools ggplot2 package, part tidyverse series packages. ’ll see similar coding structures throughout Chapter, covered well Chapter 3 Grolemund Wickham.11","code":"\nggplot(data = nh_dat1, aes(x = Age, y = Height)) +\n    geom_point()Warning: Removed 37 rows containing missing values\n(geom_point)."},{"path":"dataviz.html","id":"subset-of-subjects-with-known-age-and-height","chapter":"3 NHANES: Initial Exploring","heading":"3.3 Subset of Subjects with Known Age and Height","text":"move , let’s manipulate data set bit, focus subjects complete data Age Height. help us avoid warning message.Note units explanations variables contained NHANES help file, available via typing ?NHANES Console R Studio, typing NHANES Search bar R Studio’s Help window.","code":"\nnh_dat2 <- nh_dat1 %>%\n    filter(complete.cases(Age, Height)) \n\nsummary(nh_dat2)       ID           SurveyYr      Gender         Age       \n Min.   :51624   2009_10:487   female:484   Min.   : 2.00  \n 1st Qu.:57034   2011_12:476   male  :479   1st Qu.:19.00  \n Median :62056                              Median :37.00  \n Mean   :61967                              Mean   :38.29  \n 3rd Qu.:67269                              3rd Qu.:56.00  \n Max.   :71875                              Max.   :80.00  \n     Height     \n Min.   : 85.0  \n 1st Qu.:156.2  \n Median :165.0  \n Mean   :162.3  \n 3rd Qu.:174.5  \n Max.   :195.9  "},{"path":"dataviz.html","id":"the-distinction-between-gender-and-sex","chapter":"3 NHANES: Initial Exploring","heading":"3.4 The Distinction between Gender and Sex","text":"Gender variable mis-named. data refer biological status subjects, Sex, social construct Gender can quite different. effort avoid confusion, ’ll rename variable Gender Sex accurately describe actually measured ., can use approach…’s better. many observations now? use dim find number rows columns new data set., simply list data set read result.","code":"\nnh_dat2 <- nh_dat1 %>%\n    rename(Sex = Gender) %>%\n    filter(complete.cases(Age, Height)) \n\nsummary(nh_dat2)       ID           SurveyYr       Sex           Age       \n Min.   :51624   2009_10:487   female:484   Min.   : 2.00  \n 1st Qu.:57034   2011_12:476   male  :479   1st Qu.:19.00  \n Median :62056                              Median :37.00  \n Mean   :61967                              Mean   :38.29  \n 3rd Qu.:67269                              3rd Qu.:56.00  \n Max.   :71875                              Max.   :80.00  \n     Height     \n Min.   : 85.0  \n 1st Qu.:156.2  \n Median :165.0  \n Mean   :162.3  \n 3rd Qu.:174.5  \n Max.   :195.9  \ndim(nh_dat2)[1] 963   5\nnh_dat2# A tibble: 963 x 5\n      ID SurveyYr Sex      Age Height\n   <int> <fct>    <fct>  <int>  <dbl>\n 1 69638 2011_12  female     5   106.\n 2 70782 2011_12  male      64   176.\n 3 52408 2009_10  female    54   162.\n 4 59031 2009_10  female    15   155.\n 5 64530 2011_12  male      53   185.\n 6 71040 2011_12  male      63   169.\n 7 55186 2009_10  female    30   168.\n 8 60211 2009_10  male       5   103.\n 9 55730 2009_10  male      66   161.\n10 68229 2011_12  female    36   170.\n# ... with 953 more rows"},{"path":"dataviz.html","id":"age-height-and-sex","chapter":"3 NHANES: Initial Exploring","heading":"3.5 Age-Height and Sex?","text":"Let’s add Sex plot using color, also adjust y axis label incorporate units measurement.","code":"\nggplot(data = nh_dat2, aes(x = Age, y = Height, color = Sex)) +\n    geom_point() +\n    labs(title = \"Height-Age Relationship in NHANES sample\", \n         y = \"Height in cm.\")"},{"path":"dataviz.html","id":"can-we-show-the-female-and-male-relationships-in-separate-panels","chapter":"3 NHANES: Initial Exploring","heading":"3.5.1 Can we show the Female and Male relationships in separate panels?","text":"Sure.","code":"\nggplot(data = nh_dat2, aes(x = Age, y = Height, color = Sex)) +\n    geom_point() + \n    labs(title = \"Height-Age Relationship in NHANES sample\", \n         y = \"Height in cm.\") +\n    facet_wrap(~ Sex)"},{"path":"dataviz.html","id":"can-we-add-a-smooth-curve-to-show-the-relationship-in-each-plot","chapter":"3 NHANES: Initial Exploring","heading":"3.5.2 Can we add a smooth curve to show the relationship in each plot?","text":"Yep, let’s change theme graph remove gray background, .","code":"\nggplot(data = nh_dat2, aes(x = Age, y = Height, color = Sex)) +\n    geom_point() + \n    geom_smooth(method = \"loess\", formula = y ~ x) +\n    labs(title = \"Height-Age Relationship in NHANES sample\", \n         y = \"Height in cm.\") +\n    theme_bw() +\n    facet_wrap(~ Sex)"},{"path":"dataviz.html","id":"what-if-we-want-to-assume-straight-line-relationships","chapter":"3 NHANES: Initial Exploring","heading":"3.5.3 What if we want to assume straight line relationships?","text":"look linear model plot. make sense ?hope seems clear graphs complex relationship going just straight line.next Section Notes, ’ll take carefully selected sample NHANES respondents, study subjects greater detail.","code":"\nggplot(data = nh_dat2, aes(x = Age, y = Height, color = Sex)) +\n    geom_point() + \n    geom_smooth(method = \"lm\", formula = y ~ x) +\n    labs(title = \"Height-Age Relationship in NHANES sample\", \n         y = \"Height in cm.\") +\n    theme_bw() +\n    facet_wrap(~ Sex)"},{"path":"references.html","id":"references","chapter":"References","heading":"References","text":"","code":""}]
