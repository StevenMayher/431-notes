<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 NHANES: A New Sample | Data Science for Biological, Medical and Health Research: Notes for PQHS/CRSP/MPHP 431</title>
  <meta name="description" content="This book provides examples of some fundamental approaches to doing biostatistical and data science in research." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 NHANES: A New Sample | Data Science for Biological, Medical and Health Research: Notes for PQHS/CRSP/MPHP 431" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book provides examples of some fundamental approaches to doing biostatistical and data science in research." />
  <meta name="github-repo" content="thomaselove/431-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 NHANES: A New Sample | Data Science for Biological, Medical and Health Research: Notes for PQHS/CRSP/MPHP 431" />
  
  <meta name="twitter:description" content="This book provides examples of some fundamental approaches to doing biostatistical and data science in research." />
  

<meta name="author" content="Thomas E. Love" />


<meta name="date" content="2021-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dataviz.html"/>
<link rel="next" href="data-structures-and-types-of-variables.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Dr. Love's Notes for 431</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Working with These Notes</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-431-course-online"><i class="fa fa-check"></i>The 431 Course online</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-youll-find-here"><i class="fa fa-check"></i>What You’ll Find Here</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#setting-up-r"><i class="fa fa-check"></i>Setting Up R</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#initial-setup-of-r-packages"><i class="fa fa-check"></i>Initial Setup of R Packages</a></li>
<li><a href="index.html#the-love-boost.r-script">The <code>Love-boost.R</code> script</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#additional-r-packages-installed-for-this-book"><i class="fa fa-check"></i>Additional R Packages installed for this book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-science.html"><a href="data-science.html"><i class="fa fa-check"></i><b>1</b> Data Science</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-science.html"><a href="data-science.html#data-science-project-cycle"><i class="fa fa-check"></i><b>1.1</b> Data Science Project Cycle</a></li>
<li class="chapter" data-level="1.2" data-path="data-science.html"><a href="data-science.html#data-science-and-the-431-course"><i class="fa fa-check"></i><b>1.2</b> Data Science and the 431 Course</a></li>
<li class="chapter" data-level="1.3" data-path="data-science.html"><a href="data-science.html#what-the-course-is-and-isnt"><i class="fa fa-check"></i><b>1.3</b> What The Course Is and Isn’t</a></li>
</ul></li>
<li class="part"><span><b>Part A. Exploring Data</b></span></li>
<li class="chapter" data-level="2" data-path="looking-at-the-palmer-penguins.html"><a href="looking-at-the-palmer-penguins.html"><i class="fa fa-check"></i><b>2</b> Looking at the Palmer Penguins</a>
<ul>
<li class="chapter" data-level="2.1" data-path="looking-at-the-palmer-penguins.html"><a href="looking-at-the-palmer-penguins.html#package-loading-then-dealing-with-missing-data"><i class="fa fa-check"></i><b>2.1</b> Package Loading, then Dealing with Missing Data</a></li>
<li class="chapter" data-level="2.2" data-path="looking-at-the-palmer-penguins.html"><a href="looking-at-the-palmer-penguins.html#counting-things-and-making-tables"><i class="fa fa-check"></i><b>2.2</b> Counting Things and Making Tables</a></li>
<li class="chapter" data-level="2.3" data-path="looking-at-the-palmer-penguins.html"><a href="looking-at-the-palmer-penguins.html#visualizing-the-data-in-a-graph-or-a-few"><i class="fa fa-check"></i><b>2.3</b> Visualizing the Data in a Graph (or a few…)</a></li>
<li class="chapter" data-level="2.4" data-path="looking-at-the-palmer-penguins.html"><a href="looking-at-the-palmer-penguins.html#six-ways-to-improve-this-graph"><i class="fa fa-check"></i><b>2.4</b> Six Ways To “Improve” This Graph</a></li>
<li class="chapter" data-level="2.5" data-path="looking-at-the-palmer-penguins.html"><a href="looking-at-the-palmer-penguins.html#a-little-reflection"><i class="fa fa-check"></i><b>2.5</b> A Little Reflection</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> NHANES: Initial Exploring</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dataviz.html"><a href="dataviz.html#the-nhanes-data-a-first-sample"><i class="fa fa-check"></i><b>3.1</b> The NHANES data: A First Sample</a></li>
<li class="chapter" data-level="3.2" data-path="dataviz.html"><a href="dataviz.html#age-and-height"><i class="fa fa-check"></i><b>3.2</b> Age and Height</a></li>
<li class="chapter" data-level="3.3" data-path="dataviz.html"><a href="dataviz.html#subset-of-subjects-with-known-age-and-height"><i class="fa fa-check"></i><b>3.3</b> Subset of Subjects with Known Age and Height</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="dataviz.html"><a href="dataviz.html#the-distinction-between-gender-and-sex"><i class="fa fa-check"></i><b>3.3.1</b> The Distinction between <code>Gender</code> and <code>Sex</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataviz.html"><a href="dataviz.html#age-height-and-sex"><i class="fa fa-check"></i><b>3.4</b> Age-Height and Sex?</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="dataviz.html"><a href="dataviz.html#can-we-show-the-female-and-male-relationships-in-separate-panels"><i class="fa fa-check"></i><b>3.4.1</b> Can we show the Female and Male relationships in separate panels?</a></li>
<li class="chapter" data-level="3.4.2" data-path="dataviz.html"><a href="dataviz.html#can-we-add-a-smooth-curve-to-show-the-relationship-in-each-plot"><i class="fa fa-check"></i><b>3.4.2</b> Can we add a smooth curve to show the relationship in each plot?</a></li>
<li class="chapter" data-level="3.4.3" data-path="dataviz.html"><a href="dataviz.html#what-if-we-want-to-assume-straight-line-relationships"><i class="fa fa-check"></i><b>3.4.3</b> What if we want to assume straight line relationships?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html"><i class="fa fa-check"></i><b>4</b> NHANES: A New Sample</a>
<ul>
<li class="chapter" data-level="4.1" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#creating-a-new-subset-carefully"><i class="fa fa-check"></i><b>4.1</b> Creating A New Subset, Carefully</a></li>
<li class="chapter" data-level="4.2" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#numerical-summary-of-nh_4"><i class="fa fa-check"></i><b>4.2</b> Numerical Summary of <code>nh_4</code></a></li>
<li class="chapter" data-level="4.3" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#distribution-of-heights"><i class="fa fa-check"></i><b>4.3</b> Distribution of Heights</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#changing-a-histograms-fill-and-color"><i class="fa fa-check"></i><b>4.3.1</b> Changing a Histogram’s Fill and Color</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#height-and-sex"><i class="fa fa-check"></i><b>4.4</b> Height and Sex</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#a-boxplot-of-height-by-sex"><i class="fa fa-check"></i><b>4.4.1</b> A Boxplot of Height by Sex</a></li>
<li class="chapter" data-level="4.4.2" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#histograms-of-height-by-sex"><i class="fa fa-check"></i><b>4.4.2</b> Histograms of Height by Sex</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#looking-at-pulse-rate"><i class="fa fa-check"></i><b>4.5</b> Looking at Pulse Rate</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#pulse-rate-and-physical-activity"><i class="fa fa-check"></i><b>4.5.1</b> Pulse Rate and Physical Activity</a></li>
<li class="chapter" data-level="4.5.2" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#pulse-by-sleeping-trouble"><i class="fa fa-check"></i><b>4.5.2</b> Pulse by Sleeping Trouble</a></li>
<li class="chapter" data-level="4.5.3" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#pulse-and-healthgen"><i class="fa fa-check"></i><b>4.5.3</b> Pulse and HealthGen</a></li>
<li class="chapter" data-level="4.5.4" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#pulse-rate-and-systolic-blood-pressure"><i class="fa fa-check"></i><b>4.5.4</b> Pulse Rate and Systolic Blood Pressure</a></li>
<li class="chapter" data-level="4.5.5" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#sleep-trouble-vs.-no-sleep-trouble"><i class="fa fa-check"></i><b>4.5.5</b> Sleep Trouble vs. No Sleep Trouble?</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#general-health-status"><i class="fa fa-check"></i><b>4.6</b> General Health Status</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#bar-chart-for-categorical-data"><i class="fa fa-check"></i><b>4.6.1</b> Bar Chart for Categorical Data</a></li>
<li class="chapter" data-level="4.6.2" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#working-with-tables"><i class="fa fa-check"></i><b>4.6.2</b> Working with Tables</a></li>
<li class="chapter" data-level="4.6.3" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#sbp-by-general-health-status"><i class="fa fa-check"></i><b>4.6.3</b> SBP by General Health Status</a></li>
<li class="chapter" data-level="4.6.4" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#sbp-by-physical-activity-and-general-health-status"><i class="fa fa-check"></i><b>4.6.4</b> SBP by Physical Activity and General Health Status</a></li>
<li class="chapter" data-level="4.6.5" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#sbp-by-sleep-trouble-and-general-health-status"><i class="fa fa-check"></i><b>4.6.5</b> SBP by Sleep Trouble and General Health Status</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="nhanes-a-new-sample.html"><a href="nhanes-a-new-sample.html#conclusions"><i class="fa fa-check"></i><b>4.7</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html"><i class="fa fa-check"></i><b>5</b> Data Structures and Types of Variables</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html#data-require-structure-and-context"><i class="fa fa-check"></i><b>5.1</b> Data require structure and context</a></li>
<li class="chapter" data-level="5.2" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html#newNHANES"><i class="fa fa-check"></i><b>5.2</b> A New NHANES Adult Sample</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html#summarizing-the-datas-structure"><i class="fa fa-check"></i><b>5.2.1</b> Summarizing the Data’s Structure</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html#what-are-the-variables"><i class="fa fa-check"></i><b>5.2.2</b> What are the variables?</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html#quantitative-variables"><i class="fa fa-check"></i><b>5.3</b> Quantitative Variables</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html#a-look-at-bmi-body-mass-index"><i class="fa fa-check"></i><b>5.3.1</b> A look at BMI (Body-Mass Index)</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-structures-and-types-of-variables.html"><a href="data-structures-and-types-of-variables.html#qualitative-categorical-variables"><i class="fa fa-check"></i><b>5.4</b> Qualitative (Categorical) Variables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for Biological, Medical and Health Research: Notes for PQHS/CRSP/MPHP 431</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="nhanes-a-new-sample" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> NHANES: A New Sample</h1>
<div id="creating-a-new-subset-carefully" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Creating A New Subset, Carefully</h2>
<p>Suppose we wanted to select a new sample from the <code>NHANES</code> data, but now, we’ll have some additional requirements.</p>
<ol style="list-style-type: decimal">
<li>We want to start by looking only at subjects whose Age is at least 21 and at most 79, so we avoid some of the problems we saw in the previous samples with children and adults being included together in a study of height, as well as the use of Age = 80 for all subjects ages 80 and older.</li>
<li>We want to look at some of the additional variables available in the NHANES data.
<ul>
<li><code>ID</code> and <code>SurveyYr</code> to identify the participants and the survey period for each response.</li>
<li><code>Age</code> as we’ve seen before, in years.</li>
<li><code>Height</code> as we’ve seen before, in centimeters.</li>
<li><code>Gender</code> which we’ll rename as <code>Sex</code> again.</li>
<li><code>Pulse</code> = 60 second pulse rate (in beats per minute).</li>
<li><code>BPSysAve</code> = Systolic Blood Pressure, in mm Hg (and we’ll rename this <code>SBP</code>).</li>
<li><code>SleepTrouble</code> = Yes means the subject has told a health professional that they had trouble sleeping.</li>
<li><code>PhysActive</code> = Yes means the subject does moderate or vigorous-intensity sports, fitness or recreational activity.</li>
<li><code>MaritalStatus</code> = one of Married, Widowed, Divorced, Separated, NeverMarried or LivePartner (living with partner.)</li>
<li><code>HealthGen</code> = self-reported rating of general health, one of Excellent, Vgood (Very Good), Good, Fair or Poor.</li>
</ul></li>
<li>Next, we’ll deal with missing data by omitting from our sample any subjects with missingness on <em>any</em> of the variables we’ve selected.</li>
<li>Next, we only want to include unique subjects, with distinct values across the variables we are interested in. (The original <code>NHANES</code> data frame contains numerous repeated rows, where individuals from under-represented sociodemographic groups are included several times so as to mirror the characteristics of the US population in 2009-10 and 2011-12 more closely.)</li>
</ol>
<p>Once we’ve identified the complete set of responses that meet the four requirements above, we will then take a random sample of 1,000 observations, without replacement, from that group.</p>
<p>Can you see how the code below accomplishes these tasks?</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="nhanes-a-new-sample.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">431004</span>)</span>
<span id="cb34-2"><a href="nhanes-a-new-sample.html#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="nhanes-a-new-sample.html#cb34-3" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="ot">&lt;-</span> NHANES <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="nhanes-a-new-sample.html#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Age <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-5"><a href="nhanes-a-new-sample.html#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(ID, SurveyYr, Gender, Age, Height, </span>
<span id="cb34-6"><a href="nhanes-a-new-sample.html#cb34-6" aria-hidden="true" tabindex="-1"></a>           Pulse, BPSysAve, SleepTrouble, PhysActive,</span>
<span id="cb34-7"><a href="nhanes-a-new-sample.html#cb34-7" aria-hidden="true" tabindex="-1"></a>           MaritalStatus, HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="nhanes-a-new-sample.html#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Sex =</span> Gender, <span class="at">SBP =</span> BPSysAve) <span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="nhanes-a-new-sample.html#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb34-10"><a href="nhanes-a-new-sample.html#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-11"><a href="nhanes-a-new-sample.html#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">1000</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb34-12"><a href="nhanes-a-new-sample.html#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="nhanes-a-new-sample.html#cb34-13" aria-hidden="true" tabindex="-1"></a>nh_4</span></code></pre></div>
<pre><code># A tibble: 1,000 x 11
      ID SurveyYr Sex      Age Height Pulse   SBP SleepTrouble PhysActive
   &lt;int&gt; &lt;fct&gt;    &lt;fct&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;        &lt;fct&gt;     
 1 54401 2009_10  male      52   171.   100   106 Yes          No        
 2 52249 2009_10  male      43   190.    78   120 Yes          No        
 3 63461 2011_12  female    21   161     86   111 Yes          Yes       
 4 68429 2011_12  male      27   190.    86   113 No           Yes       
 5 52661 2009_10  male      71   170.    66   120 No           No        
 6 55949 2009_10  female    78   160.    58   157 Yes          No        
 7 53913 2009_10  female    75   161.    58   124 No           No        
 8 63852 2011_12  male      50   174.    50   104 No           No        
 9 68833 2011_12  male      41   160.    62   116 No           No        
10 61941 2009_10  male      22   172     88   112 Yes          No        
# ... with 990 more rows, and 2 more variables: MaritalStatus &lt;fct&gt;,
#   HealthGen &lt;fct&gt;</code></pre>
</div>
<div id="numerical-summary-of-nh_4" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Numerical Summary of <code>nh_4</code></h2>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="nhanes-a-new-sample.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nh_4)</span></code></pre></div>
<pre><code>       ID           SurveyYr       Sex           Age            Height     
 Min.   :51630   2009_10:516   female:495   Min.   :21.00   Min.   :144.2  
 1st Qu.:56374   2011_12:484   male  :505   1st Qu.:34.00   1st Qu.:161.5  
 Median :61578                              Median :47.00   Median :168.4  
 Mean   :61669                              Mean   :47.27   Mean   :168.8  
 3rd Qu.:66927                              3rd Qu.:60.00   3rd Qu.:176.1  
 Max.   :71915                              Max.   :79.00   Max.   :199.6  
     Pulse             SBP        SleepTrouble PhysActive      MaritalStatus
 Min.   : 44.00   Min.   : 80.0   No :733      No :489    Divorced    :120  
 1st Qu.: 64.00   1st Qu.:109.0   Yes:267      Yes:511    LivePartner : 83  
 Median : 72.00   Median :119.0                           Married     :527  
 Mean   : 72.66   Mean   :120.9                           NeverMarried:183  
 3rd Qu.: 80.00   3rd Qu.:129.2                           Separated   : 34  
 Max.   :128.00   Max.   :196.0                           Widowed     : 53  
     HealthGen  
 Excellent:103  
 Vgood    :264  
 Good     :430  
 Fair     :163  
 Poor     : 40  
                </code></pre>
</div>
<div id="distribution-of-heights" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Distribution of Heights</h2>
<p>What is the distribution of height in this new sample?</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="nhanes-a-new-sample.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Height)) <span class="sc">+</span> </span>
<span id="cb38-2"><a href="nhanes-a-new-sample.html#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() </span></code></pre></div>
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="431-notes_files/figure-html/nh_4_heighthistogram-fig-1.png" width="672" /></p>
<p>We can do several things to clean this up.</p>
<ol style="list-style-type: decimal">
<li>We’ll change the color of the lines for each bar of the histogram.</li>
<li>We’ll change the fill inside each bar to make them stand out a bit more.</li>
<li>We’ll add a title and relabel the horizontal (x) axis to include the units of measurement.</li>
<li>We’ll avoid the warning by selecting a number of bins (we’ll use 25 here) into which we’ll group the heights before drawing the histogram.</li>
</ol>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="nhanes-a-new-sample.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Height)) <span class="sc">+</span> </span>
<span id="cb40-2"><a href="nhanes-a-new-sample.html#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">25</span>, <span class="at">col =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb40-3"><a href="nhanes-a-new-sample.html#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height of NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb40-4"><a href="nhanes-a-new-sample.html#cb40-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Height in cm.&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_heighthistogram2-fig-1.png" width="672" /></p>
<div id="changing-a-histograms-fill-and-color" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Changing a Histogram’s Fill and Color</h3>
<p>The CWRU color guide (<a href="https://case.edu/umc/our-brand/visual-guidelines/" class="uri">https://case.edu/umc/our-brand/visual-guidelines/</a>) lists the HTML color schemes for CWRU blue and CWRU gray. Let’s match that color scheme.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="nhanes-a-new-sample.html#cb41-1" aria-hidden="true" tabindex="-1"></a>cwru.blue <span class="ot">&lt;-</span> <span class="st">&#39;#0a304e&#39;</span></span>
<span id="cb41-2"><a href="nhanes-a-new-sample.html#cb41-2" aria-hidden="true" tabindex="-1"></a>cwru.gray <span class="ot">&lt;-</span> <span class="st">&#39;#626262&#39;</span></span>
<span id="cb41-3"><a href="nhanes-a-new-sample.html#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="nhanes-a-new-sample.html#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Height)) <span class="sc">+</span> </span>
<span id="cb41-5"><a href="nhanes-a-new-sample.html#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2</span>, <span class="at">col =</span> cwru.gray, <span class="at">fill =</span> cwru.blue) <span class="sc">+</span> </span>
<span id="cb41-6"><a href="nhanes-a-new-sample.html#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height of NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb41-7"><a href="nhanes-a-new-sample.html#cb41-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Height in cm.&quot;</span>) <span class="sc">+</span></span>
<span id="cb41-8"><a href="nhanes-a-new-sample.html#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_histogramwithCWRUscheme-fig-1.png" width="672" /></p>
<p>Note the other changes to the graph above.</p>
<ol style="list-style-type: decimal">
<li>We changed the theme to replace the gray background.</li>
<li>We changed the bins for the histogram, to gather observations into groups of 2 cm. each.</li>
</ol>
</div>
</div>
<div id="height-and-sex" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Height and Sex</h2>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="nhanes-a-new-sample.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Sex, <span class="at">y =</span> Height, <span class="at">color =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb42-2"><a href="nhanes-a-new-sample.html#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb42-3"><a href="nhanes-a-new-sample.html#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height by Sex for NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb42-4"><a href="nhanes-a-new-sample.html#cb42-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Height in cm.&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_heightbysex1-fig-1.png" width="672" /></p>
<p>This plot isn’t so useful. We can improve things a little by jittering the points horizontally, so that the overlap is reduced.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="nhanes-a-new-sample.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Sex, <span class="at">y =</span> Height, <span class="at">color =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb43-2"><a href="nhanes-a-new-sample.html#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb43-3"><a href="nhanes-a-new-sample.html#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height by Sex (jittered) for NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb43-4"><a href="nhanes-a-new-sample.html#cb43-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Height in cm.&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_heightbysex2-fig-1.png" width="672" /></p>
<p>Perhaps it might be better to summarise the distribution in a different way. We might consider a boxplot of the data.</p>
<div id="a-boxplot-of-height-by-sex" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> A Boxplot of Height by Sex</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="nhanes-a-new-sample.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Sex, <span class="at">y =</span> Height, <span class="at">fill =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb44-2"><a href="nhanes-a-new-sample.html#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb44-3"><a href="nhanes-a-new-sample.html#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Boxplot of Height by Sex for NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb44-4"><a href="nhanes-a-new-sample.html#cb44-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Height in cm.&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_heightbysexbox-fig-1.png" width="672" /></p>
<p>Or perhaps we’d like to see a pair of histograms?</p>
</div>
<div id="histograms-of-height-by-sex" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Histograms of Height by Sex</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="nhanes-a-new-sample.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Height, <span class="at">fill =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb45-2"><a href="nhanes-a-new-sample.html#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span> </span>
<span id="cb45-3"><a href="nhanes-a-new-sample.html#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Histogram of Height by Sex for NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb45-4"><a href="nhanes-a-new-sample.html#cb45-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Height in cm.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb45-5"><a href="nhanes-a-new-sample.html#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> Sex)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_heightbysexhist-fig-1.png" width="672" /></p>
<p>Can we redraw these histograms so that they are a little more comparable, and to get rid of the unnecessary legend?</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="nhanes-a-new-sample.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Height, <span class="at">fill =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb46-2"><a href="nhanes-a-new-sample.html#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span> </span>
<span id="cb46-3"><a href="nhanes-a-new-sample.html#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Histogram of Height by Sex for NHANES subjects ages 21-79 (Revised)&quot;</span>,</span>
<span id="cb46-4"><a href="nhanes-a-new-sample.html#cb46-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Height in cm.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb46-5"><a href="nhanes-a-new-sample.html#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb46-6"><a href="nhanes-a-new-sample.html#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(Sex <span class="sc">~</span> .)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_heightbysexhist2-fig-1.png" width="672" /></p>
</div>
</div>
<div id="looking-at-pulse-rate" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Looking at Pulse Rate</h2>
<p>Let’s look at a different outcome, the <em>pulse rate</em> for our subjects.</p>
<p>Here’s a histogram, again with CWRU colors, for the pulse rates in our sample.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="nhanes-a-new-sample.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Pulse)) <span class="sc">+</span> </span>
<span id="cb47-2"><a href="nhanes-a-new-sample.html#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> cwru.blue, <span class="at">col =</span> cwru.gray) <span class="sc">+</span> </span>
<span id="cb47-3"><a href="nhanes-a-new-sample.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Histogram of Pulse Rate: NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb47-4"><a href="nhanes-a-new-sample.html#cb47-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Pulse Rate (beats per minute)&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_pulse_histbin1-fig-1.png" width="672" /></p>
<p>Suppose we instead bin up groups of 5 beats per minute together as we plot the Pulse rates.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="nhanes-a-new-sample.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Pulse)) <span class="sc">+</span> </span>
<span id="cb48-2"><a href="nhanes-a-new-sample.html#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> cwru.blue, <span class="at">col =</span> cwru.gray) <span class="sc">+</span> </span>
<span id="cb48-3"><a href="nhanes-a-new-sample.html#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Histogram of Pulse Rate: NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb48-4"><a href="nhanes-a-new-sample.html#cb48-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Pulse Rate (beats per minute)&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_pulse_histbin5-fig-1.png" width="672" /></p>
<p>Which is the more useful representation will depend a lot on what questions you’re trying to answer.</p>
<div id="pulse-rate-and-physical-activity" class="section level3" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Pulse Rate and Physical Activity</h3>
<p>We can also split up our data into groups based on whether the subjects are physically active. Let’s try a boxplot.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="nhanes-a-new-sample.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">y =</span> Pulse, <span class="at">x =</span> PhysActive, <span class="at">fill =</span> PhysActive)) <span class="sc">+</span> </span>
<span id="cb49-2"><a href="nhanes-a-new-sample.html#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb49-3"><a href="nhanes-a-new-sample.html#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pulse Rate by Physical Activity Status for NHANES ages 21-79&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_pulse_by_activity_box-fig-1.png" width="672" /></p>
<p>As an accompanying numerical summary, we might ask how many people fall into each of these <code>PhysActive</code> categories, and what is their “average” <code>Pulse</code> rate.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="nhanes-a-new-sample.html#cb50-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="nhanes-a-new-sample.html#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(PhysActive) <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="nhanes-a-new-sample.html#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="fu">mean</span>(Pulse), <span class="fu">median</span>(Pulse)) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="nhanes-a-new-sample.html#cb50-4" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>) </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">PhysActive</th>
<th align="right">count</th>
<th align="right">mean(Pulse)</th>
<th align="right">median(Pulse)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">No</td>
<td align="right">489</td>
<td align="right">73.36</td>
<td align="right">72</td>
</tr>
<tr class="even">
<td align="left">Yes</td>
<td align="right">511</td>
<td align="right">71.98</td>
<td align="right">72</td>
</tr>
</tbody>
</table>
<p>The <code>knitr::kable(digits = 2)</code> piece of this command tells R Markdown to generate a table with some attractive formatting, and rounding any decimals to two figures.</p>
</div>
<div id="pulse-by-sleeping-trouble" class="section level3" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Pulse by Sleeping Trouble</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="nhanes-a-new-sample.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> Pulse, <span class="at">fill =</span> SleepTrouble)) <span class="sc">+</span> </span>
<span id="cb51-2"><a href="nhanes-a-new-sample.html#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span> </span>
<span id="cb51-3"><a href="nhanes-a-new-sample.html#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Histogram of Pulse Rate by Sleep Trouble for NHANES subjects ages 21-79&quot;</span>,</span>
<span id="cb51-4"><a href="nhanes-a-new-sample.html#cb51-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Pulse Rate (beats per minute)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb51-5"><a href="nhanes-a-new-sample.html#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb51-6"><a href="nhanes-a-new-sample.html#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(SleepTrouble <span class="sc">~</span> ., <span class="at">labeller =</span> <span class="st">&quot;label_both&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_pulse_by_sleep_histbin1-fig-1.png" width="672" /></p>
<p>How many people fall into each of these <code>SleepTrouble</code> categories, and what is their “average” Pulse rate?</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="nhanes-a-new-sample.html#cb52-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="nhanes-a-new-sample.html#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(SleepTrouble) <span class="sc">%&gt;%</span></span>
<span id="cb52-3"><a href="nhanes-a-new-sample.html#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="fu">mean</span>(Pulse), <span class="fu">median</span>(Pulse)) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="nhanes-a-new-sample.html#cb52-4" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>) </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">SleepTrouble</th>
<th align="right">count</th>
<th align="right">mean(Pulse)</th>
<th align="right">median(Pulse)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">No</td>
<td align="right">733</td>
<td align="right">72.41</td>
<td align="right">72</td>
</tr>
<tr class="even">
<td align="left">Yes</td>
<td align="right">267</td>
<td align="right">73.32</td>
<td align="right">72</td>
</tr>
</tbody>
</table>
</div>
<div id="pulse-and-healthgen" class="section level3" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> Pulse and HealthGen</h3>
<p>We can compare the distribution of Pulse rate across groups by the subject’s self-reported overall health (<code>HealthGen</code>), as well.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="nhanes-a-new-sample.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> HealthGen, <span class="at">y =</span> Pulse, <span class="at">fill =</span> HealthGen)) <span class="sc">+</span> </span>
<span id="cb53-2"><a href="nhanes-a-new-sample.html#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb53-3"><a href="nhanes-a-new-sample.html#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pulse by Self-Reported Overall Health for NHANES ages 21-79&quot;</span>,</span>
<span id="cb53-4"><a href="nhanes-a-new-sample.html#cb53-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Self-Reported Overall Health&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Pulse Rate&quot;</span>) <span class="sc">+</span> </span>
<span id="cb53-5"><a href="nhanes-a-new-sample.html#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) </span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_pulsebyhealthgen1-fig-1.png" width="672" /></p>
<p>How many people fall into each of these <code>HealthGen</code> categories, and what is their “average” Pulse rate?</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="nhanes-a-new-sample.html#cb54-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="nhanes-a-new-sample.html#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb54-3"><a href="nhanes-a-new-sample.html#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="fu">mean</span>(Pulse), <span class="fu">median</span>(Pulse)) <span class="sc">%&gt;%</span></span>
<span id="cb54-4"><a href="nhanes-a-new-sample.html#cb54-4" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>) </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">HealthGen</th>
<th align="right">count</th>
<th align="right">mean(Pulse)</th>
<th align="right">median(Pulse)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Excellent</td>
<td align="right">103</td>
<td align="right">71.30</td>
<td align="right">72</td>
</tr>
<tr class="even">
<td align="left">Vgood</td>
<td align="right">264</td>
<td align="right">71.15</td>
<td align="right">70</td>
</tr>
<tr class="odd">
<td align="left">Good</td>
<td align="right">430</td>
<td align="right">72.70</td>
<td align="right">72</td>
</tr>
<tr class="even">
<td align="left">Fair</td>
<td align="right">163</td>
<td align="right">74.23</td>
<td align="right">72</td>
</tr>
<tr class="odd">
<td align="left">Poor</td>
<td align="right">40</td>
<td align="right">79.15</td>
<td align="right">76</td>
</tr>
</tbody>
</table>
</div>
<div id="pulse-rate-and-systolic-blood-pressure" class="section level3" number="4.5.4">
<h3><span class="header-section-number">4.5.4</span> Pulse Rate and Systolic Blood Pressure</h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="nhanes-a-new-sample.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> SBP, <span class="at">y =</span> Pulse)) <span class="sc">+</span></span>
<span id="cb55-2"><a href="nhanes-a-new-sample.html#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb55-3"><a href="nhanes-a-new-sample.html#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x) <span class="sc">+</span></span>
<span id="cb55-4"><a href="nhanes-a-new-sample.html#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pulse Rate vs. SBP for NHANES subjects, ages 21-79&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_pulsevssbp-fig-1.png" width="672" /></p>
</div>
<div id="sleep-trouble-vs.-no-sleep-trouble" class="section level3" number="4.5.5">
<h3><span class="header-section-number">4.5.5</span> Sleep Trouble vs. No Sleep Trouble?</h3>
<p>Could we see whether subjects who have described <code>SleepTrouble</code> show different SBP-pulse rate patterns than the subjects who haven’t?</p>
<ul>
<li>Let’s try doing this by changing the shape <em>and</em> the color of the points based on <code>SleepTrouble</code>.</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="nhanes-a-new-sample.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, </span>
<span id="cb56-2"><a href="nhanes-a-new-sample.html#cb56-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> SBP, <span class="at">y =</span> Pulse, </span>
<span id="cb56-3"><a href="nhanes-a-new-sample.html#cb56-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> SleepTrouble, <span class="at">shape =</span> SleepTrouble)) <span class="sc">+</span></span>
<span id="cb56-4"><a href="nhanes-a-new-sample.html#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb56-5"><a href="nhanes-a-new-sample.html#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x) <span class="sc">+</span></span>
<span id="cb56-6"><a href="nhanes-a-new-sample.html#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pulse Rate vs. SBP for NHANES subjects, ages 21-79&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_sbpvspulsewithsleep-fig-1.png" width="672" /></p>
<p>This plot might be easier to interpret if we faceted by <code>SleepTrouble</code>, as well.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="nhanes-a-new-sample.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, </span>
<span id="cb57-2"><a href="nhanes-a-new-sample.html#cb57-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> SBP, <span class="at">y =</span> Pulse, </span>
<span id="cb57-3"><a href="nhanes-a-new-sample.html#cb57-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> SleepTrouble, <span class="at">shape =</span> SleepTrouble)) <span class="sc">+</span></span>
<span id="cb57-4"><a href="nhanes-a-new-sample.html#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb57-5"><a href="nhanes-a-new-sample.html#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x) <span class="sc">+</span></span>
<span id="cb57-6"><a href="nhanes-a-new-sample.html#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pulse Rate vs. SBP for NHANES subjects, ages 21-79&quot;</span>) <span class="sc">+</span></span>
<span id="cb57-7"><a href="nhanes-a-new-sample.html#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> SleepTrouble, <span class="at">labeller =</span> <span class="st">&quot;label_both&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_sbpvspulsewithsleepfacets-fig-1.png" width="672" /></p>
</div>
</div>
<div id="general-health-status" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> General Health Status</h2>
<p>Here’s a Table of the General Health Status results. Again, this is a self-reported rating of each subject’s health on a five point scale (Excellent, Very Good, Good, Fair, Poor.)</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="nhanes-a-new-sample.html#cb58-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="nhanes-a-new-sample.html#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(HealthGen) </span></code></pre></div>
<pre><code> HealthGen   n percent
 Excellent 103   0.103
     Vgood 264   0.264
      Good 430   0.430
      Fair 163   0.163
      Poor  40   0.040</code></pre>
<p>The HealthGen data are categorical, which means that summarizing them with averages isn’t as appealing as looking at percentages, proportions and rates.</p>
<p>Another, somewhat simpler way to get a table of this sort of information uses the <code>tabyl</code> function from the <code>janitor</code> package in R.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="nhanes-a-new-sample.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tabyl is part of the janitor package</span></span>
<span id="cb60-2"><a href="nhanes-a-new-sample.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># already loaded: library(janitor)</span></span>
<span id="cb60-3"><a href="nhanes-a-new-sample.html#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="nhanes-a-new-sample.html#cb60-4" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="nhanes-a-new-sample.html#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(HealthGen) </span></code></pre></div>
<pre><code> HealthGen   n percent
 Excellent 103   0.103
     Vgood 264   0.264
      Good 430   0.430
      Fair 163   0.163
      Poor  40   0.040</code></pre>
<p>I don’t actually like the title of <code>percent</code> here, as it’s really a proportion, but that can be adjusted, and we can add a total.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="nhanes-a-new-sample.html#cb62-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="nhanes-a-new-sample.html#cb62-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="nhanes-a-new-sample.html#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>() <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="nhanes-a-new-sample.html#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_pct_formatting</span>()</span></code></pre></div>
<pre><code> HealthGen    n percent
 Excellent  103   10.3%
     Vgood  264   26.4%
      Good  430   43.0%
      Fair  163   16.3%
      Poor   40    4.0%
     Total 1000  100.0%</code></pre>
<p>When working with an unordered categorical variable, like <code>MaritalStatus</code>, the same approach can work.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="nhanes-a-new-sample.html#cb64-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="nhanes-a-new-sample.html#cb64-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(MaritalStatus) <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="nhanes-a-new-sample.html#cb64-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>() <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="nhanes-a-new-sample.html#cb64-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_pct_formatting</span>()</span></code></pre></div>
<pre><code> MaritalStatus    n percent
      Divorced  120   12.0%
   LivePartner   83    8.3%
       Married  527   52.7%
  NeverMarried  183   18.3%
     Separated   34    3.4%
       Widowed   53    5.3%
         Total 1000  100.0%</code></pre>
<div id="bar-chart-for-categorical-data" class="section level3" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Bar Chart for Categorical Data</h3>
<p>Usually, a <strong>bar chart</strong> is the best choice for a graphing a variable made up of categories.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="nhanes-a-new-sample.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> HealthGen)) <span class="sc">+</span> </span>
<span id="cb66-2"><a href="nhanes-a-new-sample.html#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="431-notes_files/figure-html/HealthGengraph1-fig-1.png" width="672" /></p>
<p>There are lots of things we can do to make this plot fancier.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="nhanes-a-new-sample.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> HealthGen, <span class="at">fill =</span> HealthGen)) <span class="sc">+</span> </span>
<span id="cb67-2"><a href="nhanes-a-new-sample.html#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span> </span>
<span id="cb67-3"><a href="nhanes-a-new-sample.html#cb67-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-4"><a href="nhanes-a-new-sample.html#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Self-Reported Health Status&quot;</span>,</span>
<span id="cb67-5"><a href="nhanes-a-new-sample.html#cb67-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Number of NHANES subjects&quot;</span>,</span>
<span id="cb67-6"><a href="nhanes-a-new-sample.html#cb67-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Self-Reported Health Status in NHANES subjects ages 21-79&quot;</span>)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/HealthGengraph2-fig-1.png" width="672" /></p>
<p>Or, we can really go crazy…</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="nhanes-a-new-sample.html#cb68-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="nhanes-a-new-sample.html#cb68-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="nhanes-a-new-sample.html#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(<span class="fu">prop.table</span>(n) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb68-4"><a href="nhanes-a-new-sample.html#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HealthGen, <span class="at">y =</span> pct, <span class="at">fill =</span> HealthGen)) <span class="sc">+</span> </span>
<span id="cb68-5"><a href="nhanes-a-new-sample.html#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-6"><a href="nhanes-a-new-sample.html#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb68-7"><a href="nhanes-a-new-sample.html#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-8"><a href="nhanes-a-new-sample.html#cb68-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> pct <span class="sc">+</span> <span class="dv">1</span>,    <span class="co"># nudge above top of bar</span></span>
<span id="cb68-9"><a href="nhanes-a-new-sample.html#cb68-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="fu">paste0</span>(pct, <span class="st">&#39;%&#39;</span>)),  <span class="co"># prettify</span></span>
<span id="cb68-10"><a href="nhanes-a-new-sample.html#cb68-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>), </span>
<span id="cb68-11"><a href="nhanes-a-new-sample.html#cb68-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb68-12"><a href="nhanes-a-new-sample.html#cb68-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Self-Reported Health Status&quot;</span>,</span>
<span id="cb68-13"><a href="nhanes-a-new-sample.html#cb68-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Percentage of NHANES subjects&quot;</span>,</span>
<span id="cb68-14"><a href="nhanes-a-new-sample.html#cb68-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Self-Reported Health Status in NHANES subjects ages 21-79&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-15"><a href="nhanes-a-new-sample.html#cb68-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="431-notes_files/figure-html/HealthGengraph3-fig-1.png" width="672" /></p>
</div>
<div id="working-with-tables" class="section level3" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Working with Tables</h3>
<p>We can add both row and column marginal totals, and compare subjects by Sex, as follows…</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="nhanes-a-new-sample.html#cb69-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb69-2"><a href="nhanes-a-new-sample.html#cb69-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(Sex, HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="nhanes-a-new-sample.html#cb69-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">&quot;row&quot;</span>, <span class="st">&quot;col&quot;</span>)) </span></code></pre></div>
<pre><code>    Sex Excellent Vgood Good Fair Poor Total
 female        54   132  205   81   23   495
   male        49   132  225   82   17   505
  Total       103   264  430  163   40  1000</code></pre>
<p>If we like, we can make this look a little more polished with the <code>knitr::kable</code> function…</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="nhanes-a-new-sample.html#cb71-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb71-2"><a href="nhanes-a-new-sample.html#cb71-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(Sex, HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb71-3"><a href="nhanes-a-new-sample.html#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">&quot;row&quot;</span>, <span class="st">&quot;col&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb71-4"><a href="nhanes-a-new-sample.html#cb71-4" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Sex</th>
<th align="right">Excellent</th>
<th align="right">Vgood</th>
<th align="right">Good</th>
<th align="right">Fair</th>
<th align="right">Poor</th>
<th align="right">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">female</td>
<td align="right">54</td>
<td align="right">132</td>
<td align="right">205</td>
<td align="right">81</td>
<td align="right">23</td>
<td align="right">495</td>
</tr>
<tr class="even">
<td align="left">male</td>
<td align="right">49</td>
<td align="right">132</td>
<td align="right">225</td>
<td align="right">82</td>
<td align="right">17</td>
<td align="right">505</td>
</tr>
<tr class="odd">
<td align="left">Total</td>
<td align="right">103</td>
<td align="right">264</td>
<td align="right">430</td>
<td align="right">163</td>
<td align="right">40</td>
<td align="right">1000</td>
</tr>
</tbody>
</table>
<p>Or, we can get a complete cross-tabulation, including (in this case) the percentages of people within each Sex that fall in each HealthGen category (percentages within each row) like this.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="nhanes-a-new-sample.html#cb72-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="nhanes-a-new-sample.html#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(Sex, HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="nhanes-a-new-sample.html#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb72-4"><a href="nhanes-a-new-sample.html#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_percentages</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb72-5"><a href="nhanes-a-new-sample.html#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span></span>
<span id="cb72-6"><a href="nhanes-a-new-sample.html#cb72-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_ns</span>() <span class="sc">%&gt;%</span></span>
<span id="cb72-7"><a href="nhanes-a-new-sample.html#cb72-7" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Sex</th>
<th align="left">Excellent</th>
<th align="left">Vgood</th>
<th align="left">Good</th>
<th align="left">Fair</th>
<th align="left">Poor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">female</td>
<td align="left">10.9% (54)</td>
<td align="left">26.7% (132)</td>
<td align="left">41.4% (205)</td>
<td align="left">16.4% (81)</td>
<td align="left">4.6% (23)</td>
</tr>
<tr class="even">
<td align="left">male</td>
<td align="left">9.7% (49)</td>
<td align="left">26.1% (132)</td>
<td align="left">44.6% (225)</td>
<td align="left">16.2% (82)</td>
<td align="left">3.4% (17)</td>
</tr>
<tr class="odd">
<td align="left">Total</td>
<td align="left">10.3% (103)</td>
<td align="left">26.4% (264)</td>
<td align="left">43.0% (430)</td>
<td align="left">16.3% (163)</td>
<td align="left">4.0% (40)</td>
</tr>
</tbody>
</table>
<p>And, if we wanted the column percentages, to determine which sex had the higher rate of each HealthGen status level, we can get that by changing the adorn_percentages to describe results at the column level:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="nhanes-a-new-sample.html#cb73-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb73-2"><a href="nhanes-a-new-sample.html#cb73-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(Sex, HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb73-3"><a href="nhanes-a-new-sample.html#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="st">&quot;col&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb73-4"><a href="nhanes-a-new-sample.html#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_percentages</span>(<span class="st">&quot;col&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb73-5"><a href="nhanes-a-new-sample.html#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span></span>
<span id="cb73-6"><a href="nhanes-a-new-sample.html#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_ns</span>() <span class="sc">%&gt;%</span></span>
<span id="cb73-7"><a href="nhanes-a-new-sample.html#cb73-7" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Sex</th>
<th align="left">Excellent</th>
<th align="left">Vgood</th>
<th align="left">Good</th>
<th align="left">Fair</th>
<th align="left">Poor</th>
<th align="left">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">female</td>
<td align="left">52.4% (54)</td>
<td align="left">50.0% (132)</td>
<td align="left">47.7% (205)</td>
<td align="left">49.7% (81)</td>
<td align="left">57.5% (23)</td>
<td align="left">49.5% (495)</td>
</tr>
<tr class="even">
<td align="left">male</td>
<td align="left">47.6% (49)</td>
<td align="left">50.0% (132)</td>
<td align="left">52.3% (225)</td>
<td align="left">50.3% (82)</td>
<td align="left">42.5% (17)</td>
<td align="left">50.5% (505)</td>
</tr>
</tbody>
</table>
</div>
<div id="sbp-by-general-health-status" class="section level3" number="4.6.3">
<h3><span class="header-section-number">4.6.3</span> SBP by General Health Status</h3>
<p>Let’s consider now the relationship between self-reported overall health and systolic blood pressure.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="nhanes-a-new-sample.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> HealthGen, <span class="at">y =</span> SBP, <span class="at">fill =</span> HealthGen)) <span class="sc">+</span> </span>
<span id="cb74-2"><a href="nhanes-a-new-sample.html#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb74-3"><a href="nhanes-a-new-sample.html#cb74-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;SBP by Health Status, Overall Health for NHANES ages 21-79&quot;</span>,</span>
<span id="cb74-4"><a href="nhanes-a-new-sample.html#cb74-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Systolic Blood Pressure&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Self-Reported Overall Health&quot;</span>) <span class="sc">+</span> </span>
<span id="cb74-5"><a href="nhanes-a-new-sample.html#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) </span></code></pre></div>
<p><img src="431-notes_files/figure-html/nh_4_sbpbyhealth-fig-1.png" width="672" /></p>
<p>We can see that not too many people self-identify with the “Poor” health category.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="nhanes-a-new-sample.html#cb75-1" aria-hidden="true" tabindex="-1"></a>nh_4 <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="nhanes-a-new-sample.html#cb75-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(HealthGen) <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="nhanes-a-new-sample.html#cb75-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="fu">mean</span>(SBP), <span class="fu">median</span>(SBP)) <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="nhanes-a-new-sample.html#cb75-4" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>() </span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">HealthGen</th>
<th align="right">count</th>
<th align="right">mean(SBP)</th>
<th align="right">median(SBP)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Excellent</td>
<td align="right">103</td>
<td align="right">118.4854</td>
<td align="right">116.0</td>
</tr>
<tr class="even">
<td align="left">Vgood</td>
<td align="right">264</td>
<td align="right">118.1250</td>
<td align="right">116.0</td>
</tr>
<tr class="odd">
<td align="left">Good</td>
<td align="right">430</td>
<td align="right">121.2209</td>
<td align="right">119.5</td>
</tr>
<tr class="even">
<td align="left">Fair</td>
<td align="right">163</td>
<td align="right">124.1840</td>
<td align="right">123.0</td>
</tr>
<tr class="odd">
<td align="left">Poor</td>
<td align="right">40</td>
<td align="right">129.6000</td>
<td align="right">125.5</td>
</tr>
</tbody>
</table>
</div>
<div id="sbp-by-physical-activity-and-general-health-status" class="section level3" number="4.6.4">
<h3><span class="header-section-number">4.6.4</span> SBP by Physical Activity and General Health Status</h3>
<p>We’ll build a panel of boxplots to try to understand the relationships between Systolic Blood Pressure, General Health Status and Physical Activity. Note the use of <code>coord_flip</code> to rotate the graph 90 degrees, and the use of <code>labeller</code> within <code>facet_wrap</code> to include both the name of the (Physical Activity) variable and its value.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="nhanes-a-new-sample.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> HealthGen, <span class="at">y =</span> SBP, <span class="at">fill =</span> HealthGen)) <span class="sc">+</span> </span>
<span id="cb76-2"><a href="nhanes-a-new-sample.html#cb76-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb76-3"><a href="nhanes-a-new-sample.html#cb76-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;SBP by Health Status, Overall Health for NHANES ages 21-79&quot;</span>,</span>
<span id="cb76-4"><a href="nhanes-a-new-sample.html#cb76-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Systolic BP&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Self-Reported Overall Health&quot;</span>) <span class="sc">+</span> </span>
<span id="cb76-5"><a href="nhanes-a-new-sample.html#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-6"><a href="nhanes-a-new-sample.html#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> PhysActive, <span class="at">labeller =</span> <span class="st">&quot;label_both&quot;</span>) <span class="sc">+</span> </span>
<span id="cb76-7"><a href="nhanes-a-new-sample.html#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="431-notes_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
<div id="sbp-by-sleep-trouble-and-general-health-status" class="section level3" number="4.6.5">
<h3><span class="header-section-number">4.6.5</span> SBP by Sleep Trouble and General Health Status</h3>
<p>Here’s a plot of faceted histograms, which might be used to address similar questions related to the relationship between Overall Health, Systolic Blood Pressure and Sex.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="nhanes-a-new-sample.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nh_4, <span class="fu">aes</span>(<span class="at">x =</span> SBP, <span class="at">fill =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb77-2"><a href="nhanes-a-new-sample.html#cb77-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span> </span>
<span id="cb77-3"><a href="nhanes-a-new-sample.html#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;SBP by Sex, Overall Health for NHANES ages 21-79&quot;</span>,</span>
<span id="cb77-4"><a href="nhanes-a-new-sample.html#cb77-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Systolic BP&quot;</span>) <span class="sc">+</span> </span>
<span id="cb77-5"><a href="nhanes-a-new-sample.html#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb77-6"><a href="nhanes-a-new-sample.html#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(HealthGen <span class="sc">~</span> Sex)</span></code></pre></div>
<p><img src="431-notes_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
</div>
<div id="conclusions" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Conclusions</h2>
<p>This is just a small piece of the toolbox for visualizations that we’ll create in this class. Many additional tools are on the way, but the main idea won’t change. Using the <code>ggplot2</code> package, we can accomplish several critical tasks in creating a visualization, including:</p>
<ul>
<li>Identifying (and labeling) the axes and titles</li>
<li>Identifying a type of <code>geom</code> to use, like a point, bar or histogram</li>
<li>Changing fill, color, shape, size to facilitate comparisons</li>
<li>Building “small multiples” of plots with faceting</li>
</ul>
<p>Good data visualizations make it easy to see the data, and <code>ggplot2</code>’s tools make it relatively difficult to make a really bad graph.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dataviz.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-structures-and-types-of-variables.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-nhanes2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["431-notes.pdf", "431-notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
